<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AgriChat - AI Farming Assistant</title>
  
  <!-- Essential meta tags -->
  <meta name="description" content="Chat with AgriChat AI for expert farming advice, crop management tips, and agricultural insights.">
  <meta name="robots" content="noindex, nofollow">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="assets/favicon/favicon.ico">
  
  <!-- Styles -->
  <link rel="stylesheet" href="styles/reset.css">
  <link rel="stylesheet" href="styles/variables.css">
  <link rel="stylesheet" href="styles/components.css">
  <link rel="stylesheet" href="styles/layout.css">
  <link rel="stylesheet" href="styles/pages.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="nav">
    <div class="container">
      <div class="flex items-center justify-between">
        <a href="index.html" class="nav-brand">
          üå± AgriChat
        </a>
        <ul class="nav-menu">
          <li><a href="index.html" class="nav-link">Home</a></li>
          <li><a href="chat.html" class="nav-link" style="color: var(--primary-green);">Chat</a></li>
          <li><a href="about.html" class="nav-link">About</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Chat Container -->
  <div class="chat-container">
    <!-- Chat History Sidebar -->
    <div class="chat-sidebar" id="chatSidebar">
      <div class="sidebar-header">
        <h3>üí¨ Chat History</h3>
        <button class="sidebar-toggle" id="sidebarToggle">‚ò∞</button>
      </div>
      
      <div class="sidebar-content">
        <div class="new-chat-btn">
          <button id="newChatBtn" class="btn btn-primary btn-sm">
            ‚ú® New Chat
          </button>
        </div>
        
        <div class="conversations-list" id="conversationsList">
          <!-- Conversations will be loaded here -->
        </div>
        
        <div class="sidebar-footer">
          <button id="clearHistoryBtn" class="btn btn-secondary btn-sm">
            üóëÔ∏è Clear History
          </button>
        </div>
      </div>
    </div>

    <!-- Main Chat Area -->
    <div class="chat-main">
      <!-- Chat Header -->
      <div class="chat-header">
        <div class="chat-header-left">
          <button class="sidebar-toggle-mobile" id="sidebarToggleMobile">‚ò∞</button>
          <div class="chat-title">
            <span>üå±</span>
            <span>AgriChat Assistant</span>
          </div>
        </div>
        <div class="chat-status">
          <div class="status-indicator"></div>
          <span>Online</span>
        </div>
      </div>

    <!-- Chat Messages -->
    <div class="chat-messages" id="chatMessages">
      <!-- Welcome Message -->
      <div class="message message--ai">
        <div class="mb-3">
          <strong>Welcome to AgriChat! üå±</strong>
        </div>
        <div class="mb-3">
          I'm your AI farming assistant, here to help with all your agricultural questions. 
          Whether you need advice on crop planting, pest management, soil health, or sustainable farming practices, I'm here to help!
        </div>
        <div class="mb-3">
          <strong>What can I help you with today?</strong>
        </div>
        <div class="message-time">Just now</div>
      </div>

      <!-- Suggested Questions -->
      <div class="suggested-questions">
        <h4>üí° Try asking:</h4>
        <div class="question-chips">
          <div class="question-chip" data-question="When is the best time to plant tomatoes?">
            When is the best time to plant tomatoes?
          </div>
          <div class="question-chip" data-question="How do I identify and treat crop diseases?">
            How do I identify and treat crop diseases?
          </div>
          <div class="question-chip" data-question="What's the ideal soil pH for corn?">
            What's the ideal soil pH for corn?
          </div>
          <div class="question-chip" data-question="How much water does wheat need per week?">
            How much water does wheat need per week?
          </div>
          <div class="question-chip" data-question="What are the signs of nutrient deficiency?">
            What are the signs of nutrient deficiency?
          </div>
          <div class="question-chip" data-question="How do I prepare soil for planting season?">
            How do I prepare soil for planting season?
          </div>
        </div>
      </div>
    </div>

    <!-- Chat Input -->
    <div class="chat-input-container">
      <form class="chat-input-form" id="chatForm">
        <textarea 
          class="chat-input" 
          id="chatInput" 
          placeholder="Ask me anything about farming, crops, or agriculture..."
          rows="1"
          maxlength="1000"
        ></textarea>
        <button type="submit" class="chat-send-btn" id="sendBtn">
          <span>üì§</span>
        </button>
      </form>
      
      <!-- Character Count -->
      <div class="text-center mt-2">
        <span class="text-xs opacity-60" id="charCount">0/1000</span>
      </div>
    </div>
    </div> <!-- Close chat-main -->
  </div>

  <!-- API Configuration Modal (Hidden by default) -->
  <div id="apiModal" class="modal hidden">
    <div class="modal-content">
      <h3>Configure Gemini API</h3>
      <p>To get the best responses, add your Gemini API key. Don't worry - it's stored locally and never shared!</p>
      
      <div class="form-group">
        <label for="apiToken">Gemini API Key:</label>
        <input 
          type="password" 
          id="apiToken" 
          placeholder="AIzaSy..." 
          class="form-control"
          autocomplete="off"
        >
        <small class="form-text">
          Get your free API key from <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a>
        </small>
      </div>
      
      <div class="modal-actions">
        <button id="saveApiToken" class="btn btn-primary">Save Key</button>
        <button id="skipApiToken" class="btn btn-secondary">Use Demo Mode</button>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="hidden" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); z-index: 999; display: flex; align-items: center; justify-content: center;">
    <div class="text-center">
      <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto var(--space-4);"></div>
      <p>Connecting to AgriChat...</p>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="js/utils.js"></script>
  <script src="js/api.js"></script>
  <script src="js/database-service.js"></script>
  <script src="js/chat-sidebar.js"></script>
  <script src="js/chat.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
